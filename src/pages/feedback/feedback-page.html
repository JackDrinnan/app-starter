<link rel="import" href="/bower_components/polymer/polymer.html">
<link rel="import" href="/bower_components/paper-material/paper-material.html">
<link rel="import" href="/bower_components/paper-button/paper-button.html">

<link rel="import" href="/src/header.html">
<!-- <link rel="import" href="/src/components/inputs/dj-textarea.html"> -->

<dom-module id="feedback-page">
  <template>
    <style include="app-styles">
      :host {
        display: block;
      }
      #input {
        margin: 24px 0;
      }
    </style>
    <paper-material>
      <div class="font-title">
        Feedback
      </div>
      <dj-textarea id="input" label="" minlength="15" maxlength="1000" char-counter required></dj-textarea>
      <paper-button disabled$="[[!auth]]" class="primary-button" raised on-tap="sendFeedback">Send</paper-button>
    </paper-material>
  </template>

  <script>
    Polymer({
      is: 'feedback-page',
      properties: {
        auth: Object
      },
      behaviors: [
        DjBehaviors.MainBehavior
      ],

      sendFeedback: function() {
        var feedback = this.$.input.value;
        if (feedback && feedback.length >= 15 && feedback.length <= 1000) {
          db.users.sendFeedback(this.auth.name, feedback, function () {
            showSuccessToast('Feedback sent!');
          }, showServerErrorToast);
        } else {
          this.$.input.invalid = true;
        }
      },

    });
  </script>
</dom-module>
